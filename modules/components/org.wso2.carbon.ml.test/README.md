# Demonstrating end-to-end flow of ML using Logistic Regression Algorithm.

This is a simple OSGi module which can be used to test the basic machine learning flow of WSO2 Machine Learner. This is still in very basic stage and can be improved.

#Installation

Please build the ```product-ml/modules/components/org.wso2.carbon.ml.test``` component and copy the built jar which can be found inside the ```target``` folder, into the ```dropins``` directory of the ML product i.e. ```{CARBON_HOME}/repository/components/dropins/```.

#Pre-requisite
You need to have a data-set which has only 2 classes (due to the use of Logistic Regression). A sample data-set can be found [here](https://gist.github.com/nirmal070125/a392646fd3639467462d#file-iris-csv).

#Starting ML server
After copying the ```org.wso2.carbon.ml.test``` bundle into the ML server, you can start the server like below:

```sh
./bin/wso2server.sh -DdatasetPath=/home/ml/iris.csv -DresponseVar=Response -DprojectName=mltest
```
Here,
```-DdatasetPath``` should point to the fully qualified path name of the dataset file, ```-DresponseVar``` should point to the response variable of the dataset, you have provided and ```-DprojectName``` is the name of the ML project that this data-set will be associated with.

#Running the demonstration
Once the ML server is successfully started up, this demo run will automatically happen. Following is a sample log generated by a demo run:

```sh
INFO {org.wso2.carbon.ml.test.TestMLFlow} -  **********************************************************
INFO {org.wso2.carbon.ml.test.TestMLFlow} -  Demonstrating end-to-end flow of ML using LOGISTIC REGRESSION.
INFO {org.wso2.carbon.ml.test.TestMLFlow} -  **********************************************************
INFO {org.wso2.carbon.ml.test.TestMLFlow} -  **********************************************************
INFO {org.wso2.carbon.ml.test.TestMLFlow} -  ********** LogisticRegressionModel Generation  ***********
INFO {org.wso2.carbon.ml.test.TestMLFlow} -  **********************************************************
INFO {org.wso2.carbon.ml.test.TestMLFlow} -  Created a project : mltest
INFO {org.wso2.carbon.ml.test.TestMLFlow} -  Add Super Tenant to project : mltest
INFO {org.wso2.carbon.ml.test.TestMLFlow} -  Uploaded the data-set : /Volumes/personal/Users/nirmal/MLProjects/mltest/iris.csv
INFO {org.wso2.carbon.ml.test.TestMLFlow} -  Calculated summary stats of data-set: iris.csv
INFO {org.wso2.carbon.ml.test.TestMLFlow} -  Created a work-flow: mltest
INFO {org.wso2.carbon.ml.test.TestMLFlow} -  Default feature settings are set for project: mltest
INFO {org.wso2.carbon.ml.test.TestMLFlow} -  Inserted model settings: ModelSettings [modelSettingsID=mltest, workflowID=mltest, algorithmType=Classification, algorithmName=LOGISTIC_REGRESSION, response=Response, datasetURL=/Volumes/personal/Users/nirmal/MLProjects/mltest/iris.csv, trainDataFraction=0.7, hyperParameters=[HyperParameter [parameter=Iterations, value=100], HyperParameter [parameter=Learning_Rate, value=0.001], HyperParameter [parameter=Reg_Type, value=L1], HyperParameter [parameter=Reg_Parameter, value=0.001], HyperParameter [parameter=SGD_Data_Fraction, value=1]]]
INFO {org.wso2.carbon.ml.test.TestMLFlow} -  Build model request is submitted for work-flow: mltest
INFO {org.wso2.carbon.ml.test.TestMLFlow} -  Model execution started in 0 milliseconds.
INFO {org.wso2.carbon.ml.test.TestMLFlow} -  Model execution completed in 1 milliseconds.
INFO {akka.remote.RemoteActorRefProvider$RemotingTerminator} -  Shutting down remote daemon.
INFO {org.wso2.carbon.ml.test.TestMLFlow} -  Confusion matrix is generated for the model
INFO {org.wso2.carbon.ml.test.TestMLFlow} -  ConfusionMatrix [truePositives=19, trueNegatives=0, falsePositives=17, falseNegatives=0]
INFO {org.wso2.carbon.ml.test.TestMLFlow} -  **********************************************************
INFO {org.wso2.carbon.ml.test.TestMLFlow} -  *********************    Prediction    *******************
INFO {org.wso2.carbon.ml.test.TestMLFlow} -  **********************************************************
INFO {org.wso2.carbon.ml.test.TestMLFlow} -  Model of project mltest is deserialized.
INFO {org.wso2.carbon.ml.test.TestMLFlow} -  Prediction: 0.7003612164083391
```
